<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0 shrink-to-fit=no"/>
        <style>
            html,body {height: 100%; width: 100%; overflow:hidden; position: fixed; margin: 0; padding:0;}
        </style>
        <!-- Setup the Arkose API -->
        <!-- This is a demo public key that will cause a challenge to ALWAYS be shown -->
        <script data-callback="setupEnforcement" onerror="jsLoadError()" src="source" async defer></script>
        <script type="text/javascript">
            var enforcement = null;

            function jsLoadError() {
                response = {"error":"Challenge load error."}
                window.webkit.messageHandlers.AL_API_Response.postMessage({"onError" : response});
            }
            // Setup the enforcement API
            function setupEnforcement(arkoseEnforcement) {
                enforcement = arkoseEnforcement
                var arkose = arkoseEnforcement.setConfig({
                    selector: '#challenge',
                    
                    // We are using 'inline' as we want the session to be created as soon as the page loads
                    mode: "inline",
                    // DataExchange capability
                    data: { blob: "" },
                    // Language code
                    language: '',
                    // These are the functions that can be called when the enforcement API is tiggered
                    // Accessibility setting to ensure that users employing Assistive Technology do not accidentally leave the lightbox before interacting with the challenge
                    isSDK: true,
                    accessibilitySettings: {
                        lockFocusToModal: true
                    },
                    onReady: function(response) {
                        window.webkit.messageHandlers.AL_API_Event.postMessage({"name":"onReady","response":{}});
                    },
                    onShow: function (response) {
                        window.webkit.messageHandlers.AL_API_Event.postMessage({"name":"onShow","response":{}});
                    },
                    onShown: function(response) {
                        window.webkit.messageHandlers.AL_API_Event.postMessage({"name":"onShown","response":{}});
                    },
                    onDataRequest: function(response) {
                        window.webkit.messageHandlers.AL_API_Event.postMessage({"name":"onDataRequest","response":response.requested.sdk});
                        //window.webkit.messageHandlers.AL_API_Data.postMessage({"onDataRequest" : response.requested.sdk});
                    },
                    onSuppress: function(response) {
                        window.webkit.messageHandlers.AL_API_Event.postMessage({"name":"onSuppress","response":{}});
                    },
                    onHide: function(response) {
                        window.webkit.messageHandlers.AL_API_Event.postMessage({"name":"onHide","response":{}});
                    },
                    onReset: function(response) {
                        window.webkit.messageHandlers.AL_API_Event.postMessage({"name":"onReset","response":{}});
                    },
                    onCompleted: function(response) {
                        window.webkit.messageHandlers.AL_API_Event.postMessage({"name":"onCompleted","response":response});
                    },
                    onError: function (response) {
                        window.webkit.messageHandlers.AL_API_Event.postMessage({"name":"onError","response":response});
                    },
                    onFailed: function (response) {
                        window.webkit.messageHandlers.AL_API_Event.postMessage({"name":"onFailed","response":response});
                    },
                    onResize: function (response) {
                        window.webkit.messageHandlers.AL_API_Event.postMessage({"name":"onResize","response":response});
                    }
                });
            }
            
            function fingerprintData(dataCollection) {
                enforcement.dataResponse(dataCollection)
            }
            
            function resetSession() {
                enforcement.reset();
            }
        </script>
    </head>
    <body id="challenge"></body>
</html>

